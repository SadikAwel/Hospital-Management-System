<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Portal - Zewditu Hospital</title>
    <link rel=stylesheet href="../css/index.css">
    </link>
    <link rel=stylesheet href="../css/bootstrap.css">
    </link>
    </link>
    <link rel="stylesheet" href="../css/login.css">
    </link>
    <link rel="stylesheet" href="../CSS/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header/Navbar -->
    <header class="header">
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <a href="index.html">
                        <span class="logo-primary">Zewditu</span>
                        <span class="logo-secondary">Hospital</span>
                    </a>
                </div>

                <nav class="nav-desktop">
                    <ul class="nav-links">
                        <li><a href="../index.html">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle">Services <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="services/general-medicine.html">General Medicine</a></li>
                                <li><a href="services/emergency-care.html">Emergency Care</a></li>
                                <li><a href="services/specialized-care.html">Specialized Care</a></li>
                            </ul>
                        </li>
                        <li><a href="doctors.html">Doctors</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>

                <div class="nav-buttons">
                    <a href="patient-portal.html" class="btn btn-outline">Patient Portal</a>
                    <a href="appointments.html" class="btn btn-primary">Book Appointment</a>
                </div>

                <button class="mobile-menu-btn" title="first">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div class="mobile-menu">
                <ul class="mobile-nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="doctors.html">Doctors</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="patient-portal.html" class="btn btn-outline mobile-btn">Patient Portal</a></li>
                    <li><a href="appointments.html" class="btn btn-primary mobile-btn">Book Appointment</a></li>
                </ul>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="page-header">
                <h1>Doctor Portal</h1>
            </div>

            <div class="portal-container">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="login">Login</button>
                    <button class="tab-btn" data-tab="lookup">Patient Lookup</button>
                </div>

                <div class="tab-content">
                    <!-- Login Tab -->
                    <div class="tab-pane active" id="login">
                        <div class="card">
                            <div class=" login-container">
                                <div class="login-card">
                                    <div class="logo"> <img
                                            src="https://img.icons8.com/ios-filled/100/4A90E2/hospital-room.png"
                                            alt="Hospital Logo" /> </div>
                                    <h2>Staff Login</h2>
                                    <p>Welcome back, doctor or nurse. Please login to access the system.</p>
                                    <form id="loginForm">
                                        <input type="text" id="emailOrUsername" placeholder="Staff ID or Email"
                                            required />
                                        <input type="password" id="password" placeholder="Password" required />
                                        <button type="submit" id="loginButton">Login</button>
                                    </form>
                                    <div class="footer-links"> <a href="#">Forgot Password?</a> | <a href="#">Contact IT
                                            Support</a> </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Patient Lookup Tab -->
                    <div class="tab-pane" id="lookup">
                        <div class="card">
                            <div class="card-header">
                                <h2>Patient Information Lookup</h2>
                            </div>
                            <div class="card-body">
                                <form id="doctor-patient-lookup-form" class="form">
                                    <div class="form-group">
                                        <label for="doctor-lookup-id">Doctor ID</label>
                                        <input type="text" id="doctor-lookup-id" placeholder="Enter Doctor ID" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="doctor-lookup-patient-id">Patient ID</label>
                                        <input type="text" id="doctor-lookup-patient-id" placeholder="Enter Patient ID"
                                            required>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-block" id="doctor-lookup-btn">
                                        Get Patient Data
                                    </button>
                                    <div id="doctor-lookup-error" class="error-message"></div>
                                </form>

                                <div id="doctor-patient-result" class="patient-result"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <!-- Hospital Info -->
                <div class="footer-column">
                    <h3>Zewditu Hospital</h3>
                    <p>Providing exceptional healthcare services with compassion and excellence since 1998.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="doctors.html">Doctors</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>

                <!-- Services -->
                <div class="footer-column">
                    <h3>Our Services</h3>
                    <ul class="footer-links">
                        <li><a href="services/general-medicine.html">General Medicine</a></li>
                        <li><a href="services/emergency-care.html">Emergency Care</a></li>
                        <li><a href="services/specialized-care.html">Specialized Care</a></li>
                        <li><a href="services/surgery.html">Surgery</a></li>
                        <li><a href="services/diagnostic.html">Diagnostic Services</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="contact-info">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>123 Hospital Street, Addis Ababa, Ethiopia</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>+251 11 234 5678</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span>info@zewdituhospital.com</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> Zewditu Hospital. All rights reserved.</p>
            </div>
        </div>
    </footer>




    <script src="../js/index.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/script.js"></script>
    <script>document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const emailOrUsername = document.getElementById("emailOrUsername").value;
            const password = document.getElementById("password").value;
            const loginButton = document.getElementById("loginButton");
            console.log(password, emailOrUsername, loginButton);
            // Disable button during request to prevent double-submission
            loginButton.disabled = true;
            loginButton.textContent = "Logging in...";

            try {
                const response = await fetch("http://localhost:4000/staff/login", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ emailOrUsername, password }),
                });

                const data = await response.json();

                if (response.ok) {
                    // ✅ Save staff info locally
                    localStorage.setItem("staff", JSON.stringify(data.staff));

                    // You can redirect or show welcome message
                    alert("Login successful!");
                    window.location.href = "doctor-portal-page.html"; // or whatever your next page is
                } else {
                    alert(data.message || "Login failed");
                }
            } catch (error) {
                console.error("Login error:", error);
                alert("Server error. Please try again later.");
            }
        });

    </script>
</body>

</html>